<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
  <meta http-equiv="Content-Security-Policy" content="default-src * data:">
  <title></title>
  <link href="lib/ionic/css/ionic.css" rel="stylesheet">
  <link href="lib/ionic-material/dist/ionic.material.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="css/leaflet-routing-machine.css">
  <link href="https://fonts.googleapis.com/css?family=RobotoDraft%3A400%2C500%2C700%2C400italic" rel="stylesheet" type="text/css">

  <!-- ionic/angularjs js -->
  <script src="lib/ionic/js/ionic.bundle.js"></script>
  <script src="lib/ionic-platform-web-client/dist/ionic.io.bundle.min.js"></script>
  <script src="lib/ionic-material/dist/ionic.material.min.js"></script>
  <!-- cordova script (this will be a 404 during development) -->
  <!-- Cordova is bootstrapped by ionic-platform-web-client, uncomment this if you remove ionic-platform-web-client... -->
  <script src="lib/ngCordova/dist/ng-cordova.js"></script>
  <script src="cordova.js"></script>

  <!-- your app's js -->

  <script type="text/javascript" src="js/superfeedr.js"></script>
  <script stc="js/datahandler.js"></script>
  <script src="js/app.js"></script>
  <script src="js/factories/birdService.js"></script>
  <script src="js/factories/cameraService.js"></script>
  <script src="js/factories/eventService.js"></script>
  <script src="js/factories/facebookService.js"></script>
  <script src="js/factories/newsService.js"></script>
  <script src="js/factories/parkDataService.js"></script>
  <script src="js/factories/tweetService.js"></script>
  <script src="js/factories/scopeSaving.js"></script>
  <script src="js/controllers.js"></script>
  <script src="js/controllers/ActivitiesCtrl.js"></script>
  <script src="js/controllers/BirdsCtrl.js"></script>
  <script src="js/controllers/EventsCtrl.js"></script>
  <script src="js/controllers/FavsCtrl.js"></script>
  <script src="js/controllers/MapCtrl.js"></script>
  <script src="js/controllers/NewsCtrl.js"></script>
  <script src="js/controllers/FacebookCtrl.js"></script>
  <script src="js/controllers/SubmitCtrl.js"></script>
  <script src="js/controllers/PopoverCtrl.js"></script>


  <script src="js/leaflet-src.js"></script>
  <script src="js/leaflet-routing-machine.js"></script>

  <link rel="stylesheet" href="css/easy-button.css">
  <script src="js/easy-button.js"></script>

</head>
<body ng-app="starter" ng-csp="">

  <script id="templates/menu.html" type="text/ng-template">
    <ion-side-menus enable-menu-with-back-views="false">
      <ion-side-menu-content >
        <ion-nav-bar class="bar-balanced">
          <ion-nav-back-button>
          </ion-nav-back-button>
          <ion-nav-buttons side="left">
            <button class="button button-icon button-clear ion-navicon" menu-toggle="left">
            </button>
          </ion-nav-buttons>
        </ion-nav-bar>

        <!-- TABS -->
        <ion-tabs ng-class="{'tabs-item-hide': $root.hideTabs}">
          <ion-tab>
            <ion-nav-view name="activities-tab"></ion-nav-view>
          </ion-tab>
          <ion-tab>
            <ion-nav-view name="events-tab"></ion-nav-view>
          </ion-tab>
          <ion-tab>
            <ion-nav-view name="birds-tab"></ion-nav-view>
          </ion-tab>
          <ion-tab>
            <ion-nav-view name="news-tab"></ion-nav-view>
          </ion-tab>
          <ion-tab>
            <ion-nav-view name="favs-tab"></ion-nav-view>
          </ion-tab>
          <ion-tab>
            <ion-nav-view name="map-tab"></ion-nav-view>
          </ion-tab>
          <ion-tab>
            <ion-nav-view name="facebook-tab"></ion-nav-view>
          </ion-tab>
          <ion-tab>
            <ion-nav-view name="submit-tab"></ion-nav-view>
          </ion-tab>
        </ion-tabs>

      </ion-side-menu-content>

       <!-- Side Menu (left) -->
      <ion-side-menu side="left">
        <ion-header-bar class="bar-stable">
          <h1 class="title">Menu</h1>
        </ion-header-bar>
        <ion-content>
          <ion-list>
            <!-- <ion-item menu-close href="#/tab/map">
              Map
            </ion-item> -->
            <ion-item menu-close href="#/tab/activities">
              <i class="icon ion-android-bicycle"></i>
              Activities
            </ion-item>
            <ion-item menu-close href="#/tab/events">
              <i class="icon ion-calendar"></i>
              Events
            </ion-item>
            <ion-item menu-close href="#/tab/news">
              <i class="icon ion-ios-book-outline"></i>
              News
            </ion-item>
            <ion-item menu-close href="#/tab/favs">
              <i class="icon ion-heart"></i>
              Favourites
            </ion-item>
            <ion-item menu-close href="#/tab/birds">
              <i class="icon ion-egg"></i>
              Birds
            </ion-item>
            <ion-item menu-close href="#/tab/submit">
              <i class="icon ion-eye"></i>
              Submit Sighting
            </ion-item>
            <ion-item menu-close href="#/tab/facebook">
              <i class="icon ion-social-facebook"></i>
              facebook
            </ion-item>
          </ion-list>
        </ion-content>
      </ion-side-menu>
    </ion-side-menus>
  </script>

  <ion-nav-view></ion-nav-view>

  <script id="templates/map.html" type="text/ng-template">
    <ion-view title="Cotswold Water Park" hide-tabs="true">
    <ion-nav-buttons side="right">
        <a class="button button-icon icon ion-settings button-clear" ng-click="popover.show($event)"></a>
      </ion-nav-buttons>
      <ion-content>
          <div id="map" data-tap-disabled="true"></div>
        </ion-content>
    </ion-view>
  </script>

  <script id="templates/popover.html" type="text/ng-template">
    <ion-popover-view>
      <ion-content ng-controller="PopoverCtrl">
        <div class="list">
          <ion-toggle ng-click = "controlLayers('activityLayer')" ng-checked="true">General Activities</ion-toggle>
          <ion-toggle ng-click = "controlLayers('waterLayer')" ng-checked="true">Water Activities</ion-toggle>
          <ion-toggle ng-click = "controlLayers('groupLayer')" ng-checked="true">Group Activities</ion-toggle>
          <ion-toggle ng-click = "controlLayers('foodLayer')" ng-checked="true">Food and Hotels</ion-toggle>
          <ion-toggle ng-click = "controlLayers('birdLayer')" ng-checked="true">Birds</ion-toggle>
          <ion-toggle ng-click = "controlLayers('lakeLayer')" ng-checked="true">Lake numbers</ion-toggle>
          <ion-toggle ng-click = "controlLayers('offlineLayer')" ng-checked="false">Offline</ion-toggle>
        </div>
      </ion-content>
    </ion-popover-view>
  </script>

  <script id="templates/favs.html" type="text/ng-template">
    <ion-view title="Cotswold Water Park" align-title="center" hide-tabs="true">
      <ion-nav-buttons side="right">
        <a class="button button-icon button-clear ion-map" href="#/tab/map"></a>
      </ion-nav-buttons>
      <div class="bar bar-subheader item-input-inset has-footer">
          <label class="item-input-wrapper">
            <i class="icon ion-ios-search placeholder-icon"></i>
            <input type="search" placeholder="Search" ng-model="searchQuery">
          </label>
          <button class="button button-clear">
            Cancel
          </button>
        </div>
        <ion-content class="has-subheader">
          <ion-list>
            <div ng-repeat="activity in favourites | filter:searchQuery">
              <ion-item class="item-stable" ng-click="toggleGroup(activity)" >
                <i class="icon" ng-class="isGroupShown(activity) ? &apos;ion-minus&apos; : &apos;ion-plus&apos;"></i>
                &#xA0;
                {{activity.Name}}
              </ion-item>
              <ion-item class="item-accordion" ng-show="isGroupShown(activity)">

                <a class="item item-icon-left, item item-text-wrap" href="#">
                  <i class="icon ion-information-circled"></i>
                  {{activity.Type}}
                </a>
                <ion-list>
                  <div class="list">
                    <div>

                      <a class="item item-icon-left" href="#">
                        <i class="icon ion-ios-telephone"></i>
                        {{activity.Number}}
                      </a>
                      <a class="item item-icon-left" href="#">
                        <i class="icon ion-email"></i>
                        {{activity.Email}}
                      </a>
                      <a class="item item-icon-left" href="{{activity.url}}">
                        <i class="icon ion-android-globe"></i>
                        <hyper>{{activity.URL}}</hyper>
                      </a>
                      <a class="item item-icon-left, item item-text-wrap" href="#">
                        <i class="icon ion-information-circled"></i>
                        {{activity.Description}}
                      </a>
                      <a class= "item item-icon-center" href="#/tab/map">
                        <div>
                          <button class="button button-act" ng-click="showOnMap({{activity}})">
                            <i class="icon ion-ios-navigate-outline"></i>
                            Show Location on Map
                          </button>
                        </div>
                      </a>
                      <a class= "item item-icon-center" href="#">
                        <div>
                            <button class="button button-assertive button-act" ng-click="removeFromFavourites({{activity}})">
                            <i class="icon ion-heart-broken"></i>
                            Remove From Favourites
                            </button>
                        </div>
                      </a>
                    </div>
                  </div>
                </ion-list>

              </ion-item>
            </div>
          </ion-list>
        </ion-content>
    </ion-view>
  </script>

  <script id="templates/events.html" type="text/ng-template">
    <ion-view title="Cotswold Water Park" hide-tabs="true">
      <ion-nav-buttons side="right">
        <a class="button button-icon button-clear ion-map" href="#/tab/map"></a>
      </ion-nav-buttons>
      <div class="bar bar-subheader item-input-inset has-footer">
        <label class="item-input-wrapper">
          <i class="icon ion-ios-search placeholder-icon"></i>
          <input type="search" placeholder="Search" ng-model="searchQuery">
        </label>
        <button class="button button-clear">
          Cancel
        </button>
      </div>
      <ion-content class="has-subheader">
        <ion-list>
          <div ng-repeat="event in events | filter:searchQuery">
            <ion-item class="item-stable" ng-click="toggleGroup(event)" ng-class="{active: isGroupShown(event)}">
              <i class="icon" ng-class="isGroupShown(event) ? &apos;ion-minus&apos; : &apos;ion-plus&apos;"></i>
              &#xA0;
              {{event.title}}
            </ion-item>
            <ion-item class="item-accordion" ng-show="isGroupShown(event)">
              <div class="list">

                <div class="item item-icon-left" href="#" ng-bind-html="event.contentSnippet">

                  <i class="icon ion-ios-telephone"></i>
                </div>
                <a class="item item-icon-left" href="#">
                  <i class="icon ion-android-globe"></i>
                  {{event.link}}
                </a>
              </div>
            </div>
            </ion-list>

              </div>
            </ion-item>
          </div>
        </ion-list>
      </ion-content>
    </ion-view>
  </script>

<script id="templates/submit.html" type="text/ng-template">
  <ion-view title="Cotswold Water Park" hide-tabs="true">
    <ion-nav-buttons side="right">
      <a class="button button-icon button-clear ion-map" href="#/tab/map"></a>
    </ion-nav-buttons>

      <ion-content class="has-subheader">
        <div class="list" margin="auto" float="center" padding="auto" margin="auto">
          <div class="row">
          <div class="col text-center">
          <label class="item item-input">
            <input type="text" placeholder="Name" ng-model="sighting.Name" />
          </label>
          <label class="item item-input">
            <input type="text" placeholder="Email" ng-model="sighting.Email"/>
          </label>
          <label class="item item-input">
            <input type="text" placeholder="Date" ng-model="sighting.Date"/>
          </label>
          <label class="item item-input">
            <input type="text" placeholder="Sightings or Comments" ng-model="sighting.Text"/>
          </label>
          <button class="button button-positive" ng-click="submit(sighting);">Submit</button>
        </div> <!-- showToast('Sighting sent', 'long', 'bottom') -->
      </div class="item item-image"><!--
        <img ng-show="imgURI !== undefined" ng-src="{{imgURI}}">
        <img ng-show="imgURI === undefined" ng-src="http://placehold.it/300x300"> -->
        <img ng-src='{{pictureUrl}}'>
      </div>
      <button class="button" ng-click="takePicture()">Take Picture</button>
      </ion-content>
  </ion-view>

</script>

  <script id="templates/activities.html" type="text/ng-template">
    <ion-view title="Cotswold Water Park" hide-tabs="true">
      <ion-nav-buttons side="right">
        <a class="button button-icon button-clear ion-map" href="#/tab/map"></a>
      </ion-nav-buttons>
      <div class="bar bar-subheader item-input-inset">
          <label class="item item-input item-select">
            <div class="input-label">
              Filter Activities
            </div>
            <select ng-model="selectedActivity" ng-options="a for a in activityOptions">
            </select>
          </label>
        </div>

        <!--
        <div class="bar bar-subheader item-input-inset has-footer">
          <label class="item-input-wrapper">
            <i class="icon ion-ios-search placeholder-icon"></i>
            <input type="search" placeholder="Search" ng-model="searchQuery">
          </label>
          <button class="button button-clear">
            Cancel
          </button>
        </div>
        -->

        <ion-content class="has-subheader">
          <ion-list>
            <div ng-repeat="activity in activities | filter:searchQuery">
              <ion-item class="item-stable" ng-click="toggleGroup(activity)" ng-class="{active: isGroupShown(activity)}" ng-show="selectedActivity == 'All' || activity.Type == selectedActivity">
                <i class="icon" ng-class="isGroupShown(activity) ? &apos;ion-minus&apos; : &apos;ion-plus&apos;"></i>
                &#xA0;
                {{activity.Name}}
              </ion-item>
              <ion-item class="item-accordion" ng-show="isGroupShown(activity)">

                <a class="item item-icon-left, item item-text-wrap" href="#">
                  <i class="icon ion-information-circled"></i>
                  {{activity.Type}}
                </a>
                <ion-list>
                  <div class="list">
                    <div>

                      <a class="item item-icon-left" href="#">
                        <i class="icon ion-ios-telephone"></i>
                        {{activity.Number}}
                      </a>
                      <a class="item item-icon-left" href="#">
                        <i class="icon ion-email"></i>
                        {{activity.Email}}
                      </a>
                      <a class="item item-icon-left" href="{{activity.url}}">
                        <i class="icon ion-android-globe"></i>
                        <hyper>{{activity.URL}}</hyper>
                      </a>
                      <a class="item item-icon-left, item item-text-wrap" href="#">
                        <i class="icon ion-information-circled"></i>
                        {{activity.Description}}
                      </a>

                      <a class= "item item-icon-center" href="#/tab/map">
                        <div>
                          <button class="button button-act" ng-click="showOnMap({{activity}})">
                            <i class="icon ion-ios-navigate-outline"></i>
                            Show Location on Map
                          </button>
                        </div>

                        </a>
                        <a class= "item item-icon-center" href="#">
                          <div>
                          <button class="button button-energized button-act"  ng-hide="activity.fav"ng-click="addToFavourites({{activity}})">
                            <i class="icon ion-heart"></i>
                            Add to Favourites
                          </button>
                        </div>
                        <div>
                          <button class="button button button-assertive button-act" ng-show="activity.fav"  ng-click="removeFromFavourites({{activity}})">
                            <i class="icon ion-heart-broken"></i>
                            Remove From Favourites
                          </button>
                        </div>
                      </a>
                    </div>
                  </div>
                </ion-list>
              </ion-item>
            </div>
          </ion-list>
        </ion-content>
    </ion-view>
  </script>

  <script id="templates/news.html" type="text/ng-template">
    <ion-view title="Cotswold Water Park" hide-tabs="true">
      <ion-nav-buttons side="right">
        <a class="button button-icon button-clear ion-map" href="#/tab/map"></a>
      </ion-nav-buttons>
      <div class="bar bar-subheader item-input-inset has-footer">
          <label class="item-input-wrapper">
            <i class="icon ion-ios-search placeholder-icon"></i>
            <input type="search" placeholder="Search" ng-model="searchQuery">
          </label>
          <button class="button button-clear">
            Cancel
          </button>
        </div>
        <ion-content class="has-subheader">
          <ion-list>
            <div ng-repeat="item in news | filter:searchQuery">
              <ion-item class="item-stable" ng-click="toggleGroup(item)" ng-class="{active: isGroupShown(item)}">
                <i class="icon" ng-class="isGroupShown(item) ? &apos;ion-minus&apos; : &apos;ion-plus&apos;"></i>
                &#xA0;
                {{item.title}}
              </ion-item>
              <ion-item class="item-accordion" ng-show="isGroupShown(item)">
                <div class="list">
                  <div class="item item-icon-left, item item-text-wrap" href="#">
                    <a ng-bind-html="item.contentSnippet"></a>

                  </div>

                </div>
              </ion-item>
            </div>
          </ion-list>
        </ion-content>
    </ion-view>
  </script>

  <script id="templates/birds.html" type="text/ng-template">
    <ion-view title="Cotswold Water Park" hide-tabs="true">
      <ion-nav-buttons side="right">
        <a class="button button-icon button-clear ion-map" href="#/tab/map"></a>
      </ion-nav-buttons>
      <div class="bar bar-subheader item-input-inset has-footer">
          <label class="item-input-wrapper">
            <i class="icon ion-ios-search placeholder-icon"></i>
            <input type="search" placeholder="Search" ng-model="searchQuery">
          </label>
          <button class="button button-clear">
            Cancel
          </button>
        </div>
        <strong>
          <a class="content" href="#/tab/submit">
          <button class="button button-fab button-assertive icon ion-android-add">
          </button>
        </a>
        </strong>
        <ion-content class="has-subheader">
          <ion-list>
            <div class="card" href="#" ng-repeat="bird in birds | filter:searchQuery">
            <div class="item item-avatar">
              <img src="img/twitter-bird.svg" />
              <h2>{{bird["by_link/_text"]}}</h2>
              <p>{{bird['postedon_link/_text']}} </p>
            </div>
            <img  class="card-img" src="{{bird.entrycontent_image}}"/>
            <p ng-bind-html="bird.entry_content">
            </p>
        </ion-content>
    </ion-view>
  </script>

  <script id="templates/facebook.html" type="text/ng-template">
    <ion-view title="Cotswold Water Park" hide-tabs="true" ng-init="openCordovaWebView()">
      <ion-nav-buttons side="right">
        <a class="button button-icon button-clear ion-map" href="#/tab/map"></a>
      </ion-nav-buttons>
        <ion-content class="has-subheader">
        </ion-content>
    </ion-view>
  </script>

  <script>
  </script>
</body>
</html>
